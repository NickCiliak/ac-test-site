
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <link rel='stylesheet' type='text/css' href="/css/index.min.css?cache_bust=">

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>MY_SITE_NAME - Contact</title>
    </head>
    <body>
        <img src="/img/ac-mark.svg" class="logo">
        <h1>MY_SITE_NAME</h1>

        <p>Deployed on <script>document.write((new Date('DEPLOY_TIMESTAMP')).toLocaleString('en-US'))</script></p>

        <nav>
            <a href="/">Home</a>
            <a href="/about.html">About</a>
            <a href="/contact.html">Contact</a>
        </nav>

        <section>
            <h2>Contact</h2>
            <p>Use the form below to pass an email address into the tracking code. The page will reload.</p>
            <form id="email-form">
                <input type="text" id="email-input">
                <button type="submit" id="email-button">Submit</button>
            </form>
        </section>

        <script type="text/javascript" src="/js/index.min.js?cache_bust="></script>

        <script type="text/javascript">
            var form = document.getElementById('email-form');

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                var input = document.getElementById('email-input');
                var val = input.value;

                if (val.length) {
                    window.location = window.location.origin + window.location.pathname + '?email=' + val;
                }
            });

            // source https://davidwalsh.name/query-string-javascript
            function getUrlParameter(name) {
                name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
                var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
                var results = regex.exec(location.search);
                return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
            };

            var email = getUrlParameter('email');

            (function(e,t,o,n,p,r,i){e.visitorGlobalObjectAlias=n;e[e.visitorGlobalObjectAlias]=e[e.visitorGlobalObjectAlias]||function(){(e[e.visitorGlobalObjectAlias].q=e[e.visitorGlobalObjectAlias].q||[]).push(arguments)};e[e.visitorGlobalObjectAlias].l=(new Date).getTime();r=t.createElement("script");r.src=o;r.async=true;i=t.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)})(window,document,"https://diffuser-cdn.staging.app-us1.com/diffuser/diffuser.js","vgo");
            vgo('setAccount', 'MY_ACCOUNT_ID');

            if (email) {
                console.log('Set visitor email to ' + email);
                vgo('setEmail', email);
            }

            vgo('setTrackByDefault', true);

            vgo('process');
        </script>
    </body>
</html>
